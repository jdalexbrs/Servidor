<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Postulaci√≥n GodestMC</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap" rel="stylesheet">
<style>
*{box-sizing:border-box;margin:0;padding:0}
body{
  font-family:"Poppins",sans-serif;
  min-height:100vh;
  background:linear-gradient(135deg,#0f172a,#1e3a8a,#0ea5e9);
  background-size:400% 400%;
  animation:bgFlow 18s ease infinite;
  display:flex;justify-content:center;align-items:center;
  padding:20px;color:#f1f5f9;
}
@keyframes bgFlow{
  0%{background-position:0% 50%}
  50%{background-position:100% 50%}
  100%{background-position:0% 50%}
}
.container{
  width:100%;max-width:700px;
  background:rgba(255,255,255,0.06);
  border-radius:20px;
  padding:30px;
  backdrop-filter:blur(18px);
  box-shadow:0 10px 40px rgba(0,0,0,.4);
  animation:fadeIn .8s ease;
}
@keyframes fadeIn{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:none}}
h1{text-align:center;font-weight:800;font-size:2rem;margin-bottom:20px;color:#fff;text-shadow:0 0 10px rgba(14,165,233,.6)}
.progress{height:10px;background:rgba(255,255,255,0.15);border-radius:999px;overflow:hidden;margin:10px 0 25px;}
.progress i{display:block;height:100%;width:0%;background:linear-gradient(90deg,#0ea5e9,#38bdf8,#3b82f6);transition:width .6s cubic-bezier(.4,.0,.2,1);}
.step-card{display:none;animation:fadeIn .6s ease;}
.step-card.active{display:block;}
label{display:block;margin:14px 0 6px;font-size:.95rem;font-weight:600}
input,textarea,select{
  width:100%;padding:12px;border:none;border-radius:12px;
  background:rgba(255,255,255,0.1);color:#fff;font-size:1rem;outline:none;transition:.2s;
}
input:focus,textarea:focus,select:focus{background:rgba(255,255,255,0.2);box-shadow:0 0 0 2px #38bdf8;}
textarea{min-height:90px;resize:vertical}
select option{background:#0f172a;color:#f1f5f9;}
.controls{margin-top:20px;display:flex;justify-content:space-between;gap:12px;}
.btn{flex:1;background:linear-gradient(90deg,#3b82f6,#0ea5e9);padding:12px;border:none;border-radius:12px;color:#fff;font-weight:600;font-size:1rem;cursor:pointer;transition:.3s;box-shadow:0 6px 20px rgba(14,165,233,.4);}
.btn:hover{transform:translateY(-2px);box-shadow:0 8px 24px rgba(14,165,233,.6)}
.btn.ghost{background:transparent;border:2px solid rgba(255,255,255,.3);box-shadow:none;}
.btn.ghost:hover{background:rgba(255,255,255,.1)}
footer{margin-top:20px;text-align:center;font-size:.8rem;color:rgba(255,255,255,.6)}
@media(max-width:600px){
  .controls{flex-direction:column;}
  .btn{width:100%;}
}
</style>
</head>
<body>
<div class="container">
<h1>‚ö° Postulaciones GodestMC</h1>
<div class="progress"><i id="bar"></i></div>
<div style="text-align:center;margin-bottom:15px">Pregunta <span id="currentStep">1</span> de <span id="totalSteps"></span></div>

<form id="applyForm">
  <!-- Pregunta 1: Rol -->
  <div class="step-card active" data-step="1">
    <label>¬øRol al que te postulas?*</label>
    <select name="role" required>
      <option value="">‚Äî Selecciona ‚Äî</option>
      <option value="staff">Staff</option>
      <option value="dev">Dev</option>
      <option value="beta">Beta Tester</option>
    </select>
  </div>

  <!-- Pregunta 2 -->
  <div class="step-card" data-step="2">
    <label>Nick en Discord*</label>
    <input name="discord" required placeholder="Ej: mini_jdalex_brs">
  </div>

  <!-- Pregunta 3 -->
  <div class="step-card" data-step="3">
    <label>Nick en Minecraft*</label>
    <input name="mc" required placeholder="Ej: jdalexbrs">
  </div>

  <!-- Pregunta 4 -->
  <div class="step-card" data-step="4">
    <label>¬øHas sido staff/dev/beta previamente? (indica servidor, fechas y rol)*</label>
    <textarea name="exp" required></textarea>
  </div>

  <!-- Pregunta 5 -->
  <div class="step-card" data-step="5">
    <label>Pa√≠s y zona horaria donde vives*</label>
    <input name="country" required placeholder="Ej: Espa√±a (GMT+2)">
  </div>

  <!-- Pregunta 6 -->
  <div class="step-card" data-step="6">
    <label>Horas semanales que le puedes dedicar*</label>
    <input name="hours" required placeholder="Ej: 10">
  </div>

  <!-- Pregunta 7 -->
  <div class="step-card" data-step="7">
    <label>D√≠as disponibles de la semana*</label>
    <input name="days" required placeholder="Ej: Lunes, Martes, Viernes">
  </div>

  <!-- Staff-specific -->
  <div class="step-card staff-only" data-step="8">
    <label>En caso de que 2 usuarios se peleen, ¬øqu√© har√≠as?*</label>
    <textarea name="staff_conflict" required></textarea>
  </div>
  <div class="step-card staff-only" data-step="9">
    <label>¬øPor qu√© quieres ser staff dentro del servidor?*</label>
    <textarea name="staff_motive" required></textarea>
  </div>

  <!-- Dev-specific -->
  <div class="step-card dev-only" data-step="8">
    <label>¬øQu√© lenguajes de programaci√≥n dominas?*</label>
    <textarea name="dev_langs" required></textarea>
  </div>
  <div class="step-card dev-only" data-step="9">
    <label>¬øSabes manejar eventos de Minecraft en c√≥digo?*</label>
    <select name="dev_events" required>
      <option value="">‚Äî Selecciona ‚Äî</option>
      <option value="s√≠">S√≠</option>
      <option value="no">No</option>
    </select>
  </div>

  <!-- Beta-specific -->
  <div class="step-card beta-only" data-step="8">
    <label>¬øPor qu√© quieres ser Beta Tester en Godest?*</label>
    <textarea name="beta_motive" required></textarea>
  </div>
  <div class="step-card beta-only" data-step="9">
    <label>¬øQu√© te interesa m√°s: testear mec√°nicas o reportar errores visuales? ¬øPor qu√©?*</label>
    <textarea name="beta_pref" required></textarea>
  </div>

  <!-- Final -->
  <div class="step-card" data-step="10">
    <label>¬øAlgo que a√±adir?*</label>
    <textarea name="extra" required></textarea>
  </div>

  <div class="controls">
    <button type="button" id="prevBtn" class="btn ghost">Anterior</button>
    <button type="button" id="nextBtn" class="btn">Siguiente</button>
    <button type="submit" id="sendBtn" class="btn" style="display:none">Enviar</button>
  </div>
</form>
<footer>Creado con ‚ù§Ô∏è por GodestMC</footer>
</div>

<script>
const webhookUrl = "https://discord.com/api/webhooks/1423073398023651348/VAdkiXPoQYqI-feNKoiPuBTbwVEM-ORSNFOSTUANV1Bs_zYM1V6LPgBByoU6JBaCV7HT";
const form = document.getElementById("applyForm");
const steps = Array.from(document.querySelectorAll(".step-card"));
const bar = document.getElementById("bar");
const currentStepEl = document.getElementById("currentStep");
const totalStepsEl = document.getElementById("totalSteps");
const prevBtn = document.getElementById("prevBtn");
const nextBtn = document.getElementById("nextBtn");
const sendBtn = document.getElementById("sendBtn");

let stepIndex = 0;
let chosenRole = null;

// Calcula total de pasos din√°micamente
function getFilteredSteps() {
  return steps.filter(s => {
    if(s.classList.contains("staff-only")) return chosenRole==="staff";
    if(s.classList.contains("dev-only")) return chosenRole==="dev";
    if(s.classList.contains("beta-only")) return chosenRole==="beta";
    return true;
  });
}

function showStep(i){
  const filtered = getFilteredSteps();
  filtered.forEach((s,idx)=>s.classList.toggle("active",idx===i));
  bar.style.width = ((i+1)/filtered.length*100)+"%";
  currentStepEl.textContent = i+1;
  totalStepsEl.textContent = filtered.length;
  prevBtn.style.display = i===0?"none":"inline-block";
  nextBtn.style.display = i===filtered.length-1?"none":"inline-block";
  sendBtn.style.display = i===filtered.length-1?"inline-block":"none";
  validateStep();
}

function validateStep() {
  const filtered = getFilteredSteps();
  const currentFields = filtered[stepIndex].querySelectorAll("input,textarea,select");
  const allFilled = Array.from(currentFields).every(f => f.value.trim() !== "");
  nextBtn.disabled = !allFilled;
  sendBtn.disabled = !allFilled;
}

steps.forEach(step => {
  step.querySelectorAll("input,textarea,select").forEach(field => {
    field.addEventListener("input", validateStep);
    field.addEventListener("change", validateStep);
  });
});

nextBtn.onclick=()=>{
  const filtered = getFilteredSteps();
  if(stepIndex<filtered.length-1){
    stepIndex++;
    showStep(stepIndex);
  }
};
prevBtn.onclick=()=>{
  if(stepIndex>0){
    stepIndex--;
    showStep(stepIndex);
  }
};

form.onsubmit=async e=>{
  e.preventDefault();
  const fd = new FormData(form);
  const data = Object.fromEntries(fd.entries());
  const embed={
    title:"üì© Nueva Postulaci√≥n ‚Äî GodestMC",
    color:0x0ea5e9,
    fields:Object.keys(data).map(k=>({name:k,value:data[k]||"‚Äî"})),
    footer:{text:"GodestMC ‚Äî Sistema de Postulaci√≥n"},
    timestamp:new Date()
  };
  try{
    await fetch(webhookUrl,{
      method:"POST",
      headers:{"Content-Type":"application/json"},
      body:JSON.stringify({embeds:[embed]})
    });
    document.querySelector(".container").innerHTML = `
      <div style="text-align:center;padding:40px">
        <h1>‚úÖ Postulaci√≥n enviada</h1>
        <p style="margin-top:12px;font-size:1.1rem;color:#e2e8f0">
          Recuerda abrir un ticket en Discord, all√≠ se te har√°n las √∫ltimas pruebas.
        </p>
      </div>
    `;
  }catch(err){alert("‚ùå Error al enviar: "+err);}
};

// Detecta rol en primera pregunta
document.querySelector("select[name='role']").addEventListener("change", e=>{
  chosenRole = e.target.value;
});
showStep(stepIndex);
</script>
</body>
</html>
